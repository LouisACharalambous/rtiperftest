#
# OpenSSL example Certificate Authority configuration file.

####################################################################
[ ca ]
default_ca    = CA_default        # The default ca section

####################################################################
[ CA_default ]

dir                = ./                # Where everything is kept
certs              = $dir/certs        # Where the issued certs are kept
crl_dir            = $dir/crl          # Where the issued crl are kept
database           = $dir/index.txt    # database index file.
#unique_subject    = no                # Set to 'no' to allow creation of
                                       # several ctificates with same subject.
new_certs_dir      = $dir

certificate        = $dir/cacert.pem     # The CA certificate
serial             = $dir/serial         # The current serial number
crlnumber          = $dir/crlnumber      # the current crl number
                                         # must be commented out to leave a V1 CRL
crl                = $dir/crl.pem        # The current CRL
private_key        = $dir/cakey.pem      # The private key
RANDFILE           = $dir/.rand          # private random number file

x509_extensions = local_ca_extensions

name_opt           = ca_default          # Subject Name options
cert_opt           = ca_default          # Certificate field options


default_days         = 365           # how long to certify for
default_crl_days     = 30            # how long before next CRL
default_md           = sha256         # which md to use.
preserve             = no            # keep passed DN ordering

policy = policy_match
#
#
# Copy extensions specified in the certificate request
#
copy_extensions = copy

# For the CA policy
[ policy_match ]
countryName            = match
stateOrProvinceName    = match
organizationName       = match
organizationalUnitName = optional
commonName             = supplied
emailAddress           = optional

# For the 'anything' policy
# At this point in time, you must list all acceptable 'object'
# types.
[ policy_anything ]
countryName            = optional
stateOrProvinceName    = optional
localityName           = optional
organizationName       = optional
organizationalUnitName = optional
commonName             = supplied
emailAddress           = optional

[ local_ca_extensions ]
basicConstraints       = CA:false

[ req ]
prompt                 = no
default_bits           = 2048
#default_keyfile       = privkey.pem
distinguished_name     = root_ca_distinguished_name
#attributes            = req_attributes
x509_extensions        = root_ca_extensions
string_mask            = utf8only

[ root_ca_distinguished_name ]
countryName            = GB
stateOrProvinceName    = City of London
localityName           = London
organizationName       = City University of London
commonName             = Main Test CA
emailAddress           = mainca@city.ac.uk

[ root_ca_extensions ]
basicConstraints        = CA:true
